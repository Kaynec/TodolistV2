(()=>{"use strict";const e=e=>{localStorage.setItem("array",JSON.stringify(e)),localStorage.setItem("lastProject",select.value)};function t(e){return{title:e,todo:[],id:(new Date).toString()}}var n=new Date,o=String(n.getDate()).padStart(2,"0"),r=String(n.getMonth()+1).padStart(2,"0"),l=n.getFullYear();n=r+"/"+o+"/"+l;let a=[];function d(e){e.style.display="none",e.querySelector("input").value="",e.querySelector("textarea").value,e.querySelector("textarea").value&&(e.querySelector("textarea").value="")}function i(e,n){var o=e.querySelector('input[name="projectinput"]'),r=e.querySelector("p");let l=!1;for(let e=0;e<n.length;e++)if(n[e].title==o.value){l=!0;break}if(l||0==o.value)r.innerText="Please Enter A Different Name!!";else{var a=document.getElementById("select");e.style.display="none";var d=t(o.value);n.push(d),c(n),a.value=o.value,o.value=""}}function c(e){var t=document.getElementById("select");t.innerHTML="",e.forEach((e=>{let n=document.createElement("OPTION");n.value=e.title,n.innerText=e.title,n.id=e.id,t.appendChild(n)}))}function s(){var e=document.getElementById("select");if(0==e.selectedIndex)projecterrors.style.display="block",projecterrors.innerText="Can't remove the Tasks Project",setTimeout((()=>{projecterrors.innerText="",projecterrors.style.display="none"}),1500);else{var t=e.options,n=t[t.selectedIndex].id;a=a.filter((e=>e.id!==n)),projecterrors.style.display="block",projecterrors.innerText=`succesfully removed project ${e.value}`,setTimeout((()=>{projecterrors.innerText="",projecterrors.style.display="none"}),1500),c(a)}}a.push(t("Tasks"));var u=document.getElementById("select"),m=document.getElementById("todo-container"),p=document.getElementById("done-container");function y(e,t){e.forEach((e=>{var n=t.target.parentElement.parentElement.id;e.title==u.value&&e.todo.forEach((e=>{e.id==n&&(e.done=!e.done)}))}))}function v(e,t){var n=e.target.parentElement.parentElement,o=document.getElementById("changetodo"),r=o.querySelectorAll("input")[0],l=o.querySelectorAll("input")[1],a=o.querySelector("select"),d=o.querySelector("textarea"),i=o.querySelectorAll("button")[1],c=o.querySelectorAll("button")[0];o.style.display="block",i.addEventListener("click",(e=>o.style.display="none")),c.addEventListener("click",(e=>{t.forEach((e=>{u.value===e.title&&e.todo.forEach((e=>{e.id==n.id&&(e.date=l.value,e.title=r.value,e.description=d.value,e.priority=a.value,o.style.display="none",E(t))}))}))}))}function E(e){e.forEach((e=>{var t;e.title==u.value&&(t=e.todo,m.innerHTML="",p.innerHTML="",t.forEach((e=>{var t=document.createRange().createContextualFragment('<div class="todo"><div class="innertodo"><div><input type="checkbox" name="todo" class="todocheckbox" value="todo"><label></label></div><div id="dateandremove"><label></label><a id="removetodo">X</a><a id="edittodo">Edit</a></div></div><div class="paragraph" style="display:none;"><p></p></div></div>'),n=t.querySelector(".innertodo");n.id=e.id;var o=t.querySelector('input[name="todo"]');o.setAttribute("id",`todo${m.children.length}`);var r=n.querySelector("label");r.innerHTML=e.title,r.htmlFor=o.id,n.children[1].firstElementChild.innerHTML=e.date,t.querySelector("p").innerText=e.description,1==e.done?(p.append(t),o.checked=!0):(m.append(t),o.checked=!1),"Normal"===e.priority?(r.style.paddingLeft="2px",n.style.borderLeft="1.5px solid blue"):(r.style.paddingLeft="3px",n.style.borderLeft="2px solid red")})),function(){let e=document.getElementById("count").children[1],t=document.getElementById("todo-container");if(console.log(t.childElementCount),t.childElementCount>1)e.innerHTML=`${t.childElementCount} Tasks remaining`;else{var n=0==t.childElementCount?0:1;e.innerHTML=`${n} Task remaining`}}())}))}function g(e){var t=e.target.parentElement.parentElement;t.parentElement.parentElement.removeChild(t.parentElement),a.forEach((e=>{e.title==u.value&&(e.todo=e.todo.filter((e=>e.id!==t.id)))}))}function f(e){var t=e.target.parentElement.parentElement.children[1];"none"==t.style.display?t.style.display="block":t.style.display="none"}const h=document.getElementById("container"),S=document.getElementById("toggleprojectform"),I=document.getElementById("select"),b=document.getElementById("projectform"),k=document.getElementById("cancelProject"),L=document.getElementById("submitproject"),x=document.querySelector(".plus-button"),B=document.querySelector("#todoform"),T=document.getElementById("submittodo");document.getElementById("projecterrors").style.display="none";var j=JSON.parse(localStorage.getItem("array")),q=localStorage.getItem("lastProject");const C=document.getElementById("canceltodo");function M(){E(a),e(a)}window.addEventListener("DOMContentLoaded",(function(){j&&(a=j),c(a),q?(I.value=q,E(a)):E(a)})),S.addEventListener("click",(()=>{b.style.display="flex"})),k.addEventListener("click",(()=>d(b))),L.addEventListener("click",(e=>{i(b,a),M()})),x.addEventListener("click",(e=>function(e){e.style.display="block"}(B))),C.addEventListener("click",(e=>d(B))),T.addEventListener("click",(e=>{(function(e,t){let o=document.getElementById("title").value,r=document.getElementById("date");var l=e.querySelector("#todoformpara");r.setAttribute("min",`${n}`);let a=document.getElementById("todoselect").value,d=document.getElementById("description").value;if(r.value,d){let n=function(e,t,n,o){return{title:e,date:t,description:n,priority:o,done:!1,id:(new Date).toString()}}(o,r.value,d,a);t.forEach((e=>{e.title===u.value&&e.todo.push(n)})),e.style.display="none"}else l.innerHTML="Please Enter Valid Information"})(B,a),M()})),I.addEventListener("change",(()=>{M()})),h.addEventListener("click",(t=>{"removeproject"==t.target.id?(s(),M()):"removetodo"==t.target.id?(g(t),M()):"todocheckbox"==t.target.className?(y(a,t),M()):"todo"===t.target.parentElement.parentElement.className?f(t):"edittodo"===t.target.id&&(v(t,a),e(a))})),h.addEventListener("touchend",(t=>{"canceltodo"===t.target.id?d(b):"submittodo"===t.target.id?(i(b,a),M()):"removeproject"===t.target.id?(s(),M()):"edittodo"===t.target.id?(v(t,a),e(a)):"todocheckbox"==t.target.className?(y(a,t),M()):"removetodo"==t.target.id?(g(t),M()):"todo"===t.target.parentElement.parentElement.className&&f(t)}))})();